<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwill.staily.main.mapper.MainMapper">
	<select id="selectByBookmark">
		select b.m_no,b.p_no,p.p_name,p.pd_scene
		from bookmark b
		join (select pr.p_no p_no, pr.p_name p_name, prd.pd_scene pd_scene
		      from product pr
		      join product_detail prd
		      on pr.p_no=prd.p_no) p
		on b.p_no=p.p_no;
	</select>
	<select id="selectByView">
		select p.p_no,p.p_name,p.p_view,pd.pd_scene
		from product p
		join product_detail pd
		on p.p_no=pd.p_no
		where p.p_view desc;
	</select>
	<select id="selectByCategory">
		select w_no,w_category,w_poster
		from work
		where w_category='d';
	</select>
	<select id="selectByWork">
		select w.w_no,w.w_category,w.w_poster,w.w_name,w.w_tepisode,p.p_no,p.p_name,p.pd_scene
		from work w
		join (select pr.p_no p_no,pr.p_name p_name,prd.pd_scene pd_scene
		      from product pr
		      join product_detail prd
		      where pr.p_no=prd.p_no) p
		on w.w_no=p.w_no;
	</select>
	<select id="selectByEpisode">
		
	</select>
	<insert id="createBookmark" parameterType="java.lang.Integer">
		insert into bookmark (m_no,p_no)  values(#{m_no},#{p_no});
	</insert>
	<delete id="deleteBookmark">
		delete from bookmark where m_no = #{m_no} and p_no = #{p_no};
	</delete>
	
</mapper>